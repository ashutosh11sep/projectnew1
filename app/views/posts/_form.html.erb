

<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Stylish Portfolio - Start Bootstrap Theme</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/stylish-portfolio.css" rel="stylesheet">

    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,300italic,400italic,700italic" rel="stylesheet" type="text/css">

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->



<header>
    <div class="container clearfix">
        <h1 id="logo">
            Facebook
        </h1>

        <nav>
              
            <%= link_to "Profile",  {:controller =>"users", :action =>"show", :id => current_user.id} %>
            <%= link_to "Log out", destroy_user_session_path, :method => :delete %>
        </nav>
    </div>
</header>





<!DOCTYPE html>
<html lang="en">
  <head>
    <title>stream-page</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
  </head>
  <body>
    <div class="container">
      <div class="container bgbox2">
        <div class="col-md-9 ">
          <p>COLAB</p>
        </div>
        <div class="col-md-3">
          <a href=""><img src="/images/message.png" class="img" alt="Cinque Terre" ></a>
          <a href=""><img src="/images/well.png" class="img" alt="Cinque Terre" ></a>
          <a href=""><img src="/images/profile.png" class="img" alt="Cinque Terre" ></a> 
        </div>
      </div>
    </div>
    <br/>
    <div class="container">
      <div class="col-md-4">
        <a href=""><img src="/images/Generic-profile-image.png" class="img-circle" alt="Cinque Terre" ></a>
      </div>
     <div class="col-md-8">


        
  

<%= form_with(model: post, local: true) do |form| %>
  <% if post.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(post.errors.count, "error") %> prohibited this post from being saved:</h2>

      <ul>
      <% post.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>


    <div  class="form-group">
  <label for="email">
    <%= form.label :title %></label>
    <%= form.text_field :title, id: :post_title, class:"form-control",id: "email", placeholder: 'put title' %>
  </div>  

 <div class="form-group">
  <label for="pwd">
    <%= form.label :descrption %></label>
    <%= form.text_field :descrption, id: :post_descrption,class:"form-control",id: "pwd", placeholder: 'put descrption' %> 
  </div>  

    <div  class="form-group">
  <label for="email">
    <%= form.label :image %></label>
    <%= form.file_field :image, id: :post_title, class:"form-control",id: "email", placeholder: 'put image' %>
  </div>  


   <p class="form-group", class="emoji-picker-container">
    <%= form.label :feeling %><br>
    <%= form.text_area :feeling, id: :postPfeeling, class:'form-control',id: "email",placeholder: 'how you are feeling', data: { emojiable: true } %>
  </p> 
    
    
          
     <select id="e1", name="xyz[]" class="js-example-basic-multiple">
       <% @users.each do |user| %>
        <%# byebug %>
         <%#= form.collection_select :user_id, User.order(:name),:id,:name%>

    <p>  
        <option value= "<%=user.id%>"><%=user.name%></option>
    </p>
                
    <% end %>
   </select>

    
<div class="actions">
<%= form.submit("Submit", class: "btn btn-success" ) %>
  </div> 
<% end %>


<% @current_user.posts.each do |post| %>
<p id="notice"><%= notice %></p>
<p>
  <strong>Title:</strong>
  <%= post.title %>
</p>

<p>
  <strong>Descrption:</strong>
  <%= post.descrption %>
</p>

<p>
  <strong>Image:</strong>
  <%= image_tag post.image %>
</p>

<p>
  <strong>Feeling:</strong>
  <%= post.feeling %>
  <% #= content_with_emoji(post.feeling) %>
</p>


             



<% #if @post.votes_for.where(voter_id: current_user.id).first.vote_flag == true %>
   <%#= link_to "Dislike", dislike_post_path(post), method: :put %>
   <%#= post.votes_for.size %> 
  
 <% #else%>
    <%= link_to "Like", like_post_path(post), method: :put %>
    <%= post.votes_for.size %>
    
<% #end %>

 

<% end %>



        <div class="well well-sm  ">
          <a href=""><img src="/images/profile_img.png" class="img-responsive posi" width="1000" alt="Cinque Terre" ></a>
          <a href=""><img src="/images/attch.png" class="img-responsive posi1" alt="Cinque Terre" ></a>
        </div>
      <br/>  
    </div>
    </div>

    <hr/>
    <div class="container">
    <div class="col-md-4"></div>
    
    <div>
      <div class="container">
         <div class="container bgbox2">
            <div class="col-md-9 ">
               <h1>Posts</h1>
            </div>
         </div>
      </div>
      <br/>

      <% @posts.each do |post| %>
      <a href=""><img src="images/Generic-profile-image.png" class="img" alt="Cinque Terre" width="60" hight="60"></a><a href="">User Name</a>
      <div class="container">
         <div class="col-md-12">
            <div class="well well-sm ">
               <%= post.title %>
               <br/>
            </div>
            <div class="well well-sm ">
               <a <%= link_to 'Show', post %>
               </a>&nbsp;&nbsp;&nbsp;&nbsp;
               <a <%= link_to 'Edit', edit_post_path(post) %>
               </a>&nbsp;&nbsp;&nbsp;&nbsp;
               <a <%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %>
               </a>&nbsp;&nbsp;&nbsp;&nbsp;
               <a <%= link_to 'New Post', new_post_path %>
               </a>&nbsp;&nbsp;&nbsp;&nbsp;
               
              
             <button onclick="chats_click('<%=post.id%>');">        Chat</button> 

             &nbsp;&nbsp;&nbsp;&nbsp;
            <button onclick="endorses_click('<%=post.id%>');">        Endorse</button> 
               &nbsp;&nbsp;&nbsp;&nbsp;
               <%# if post.votes_for.where(voter_id: current_user.id).first.present? %>
                   
                <%= link_to "Dislike", dislike_post_path(post),class: 'vote', method: :put, remote: true %>
                
                

            <!-- <button class="btn btn-primary"> 
          <span><p><i class="fa fa-thumbs-down fa-lg" aria-hidden="true"></i></p></span>
        </button> -->

                  <span class="votes-count" data-id="<%= post.id %>">
               <%= post.get_downvotes.size  %>
              </span> 
                 


               <%# else%>
              <%= link_to "like", like_post_path(post), method: :put,class: 'vote', remote: true %>
               


                 <!-- <button class="btn btn-primary"> 
          <span><p><i class="fa fa-thumbs-up fa-lg" aria-hidden="true"></i></p></span>
        </button> -->
                <span class="votes-count" data-id="<%= post.id %>">
                <%= post.get_upvotes.size  %>
                              

              </span>  
              
  
                <%# end %>
            </div>
         </div>
         </div>

           <div class="chat_form_<%=post.id %>" style='display: none;'>
             <%= render 'chat' %>
             </div>


           
         
          <% post.endorsements.each do |endorsement| %>
         <p>
           <strong>Text:</strong>
            <%= endorsement.text %>
           </p>

          <p>
           <strong>User_id:</strong>
            <%= endorsement.user.email %>
          </p>



        <% end %>
            <%# byebug %>
            <div class="endorse_form_<%=post.id %>" style='display: none;'>
           <%= form_for([post, post.endorsements.build]) do |f| %>
         <p>
           <%= f.label :text %><br>
           <%= f.text_field :text %>
         </p>
  
          <p>
           <%= f.label :user_id %><br>
           <%= f.text_field :user_id %>
          </p>

          <p>
         <%= f.submit %>
          </p>
       <% end %>
       </div>
        <% end %>
      
      </div>
     

<script type="text/javascript">
    
    $( ".js-example-basic-multiple" ).select2({
    theme: "bootstrap" ,multiple: true
});

</script>


<script>
    
    function endorses_click(argument) {
      $(".endorse_form_"+ argument).toggle();
    }
  </script>

  <script>
    
    function chats_click(argument) {
      $(".chat_form_"+ argument).toggle();
    }
  </script>

